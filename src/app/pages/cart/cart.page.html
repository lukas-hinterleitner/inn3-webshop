<ion-header>
    <ion-toolbar>
        <ion-row class="ion-align-items-center">
            <ion-menu-button></ion-menu-button>
            <ion-title>Shopping Cart</ion-title>
            <ion-col *ngIf="products.length > 0">
                <ion-button color="danger" size="small" shape="round" (click)="clearCart()" class="ion-float-end">
                    <ion-icon name="trash" slot="icon-only"></ion-icon>
                </ion-button>
            </ion-col>
        </ion-row>
    </ion-toolbar>
</ion-header>

<ion-content class="ion-no-padding">

    <div *ngIf="products.length === 0" id="container">
        <h2>Cart is empty!</h2>
    </div>

    <ng-container *ngIf="products.length > 0">
        <ion-card *ngFor="let cartProduct of products">
            <ion-item lines="none">
                <ion-avatar slot="start">
                    <ion-img [src]="cartProduct.getProduct().getImage()"></ion-img>
                </ion-avatar>
                <ion-grid>
                    <ion-row class="ion-align-items-center">
                        <ion-col class="ion-margin-end" size="auto">
                            <ion-label>
                                <h2>{{cartProduct.getProduct().getTitle()}}</h2>
                                <h3><ion-text color="">{{cartProduct.getProduct().getPrice() | currency: 'EUR'}}</ion-text></h3>
                            </ion-label>
                        </ion-col>

                        <ion-col size="auto">
                            <ion-item class="ion-no-padding">
                                <ion-label>Amount:</ion-label>
                                <ion-select interface="popover"
                                            (ionChange)="cartProduct.changeQuantity($event.target.value); updateProducts()"
                                            value="{{cartProduct.getQuantity()}}">
                                    <ion-select-option value="{{i + 1}}"
                                                       *ngFor="let _ of amount; index as i">{{i + 1}}</ion-select-option>
                                </ion-select>
                            </ion-item>
                        </ion-col>

                        <ion-col class="ion-no-margin">
                            <ion-button color="danger" shape="round" (click)="removeFromCart(cartProduct)"
                                        class="ion-float-end">
                                <ion-icon slot="start" name="close"></ion-icon>
                                Remove
                            </ion-button>
                        </ion-col>
                    </ion-row>
                </ion-grid>
            </ion-item>
        </ion-card>
    </ng-container>
</ion-content>

<ion-footer>
    <ion-toolbar class="ion-padding-bottom">
        <ion-row class="ion-justify-content-center">
            <ion-item lines="none">
                Total: {{totalPrice | currency: 'EUR'}}
            </ion-item>
        </ion-row>
        <ion-row class="ion-justify-content-center">
            <ion-button [disabled]="products.length === 0" (click)="openCheckout()" shape="round" expand="full">
                <ion-icon slot="end" name="arrow-forward"></ion-icon>
                Proceed to checkout
            </ion-button>
        </ion-row>
    </ion-toolbar>
</ion-footer>
