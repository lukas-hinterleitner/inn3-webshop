<ion-header>
    <ion-toolbar>
        <ion-row>
                <ion-menu-button></ion-menu-button>
                <ion-title>Shopping Cart</ion-title>
            <ion-col *ngIf="products.length > 0">
                <ion-button (click)="clearCart()" class="ion-float-end">
                    Clear cart
                </ion-button>
            </ion-col>
        </ion-row>
    </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

    <ng-container *ngIf="products.length > 0">
        <form noValidate="false">
            <ion-card *ngFor="let cartProduct of products">
                <ion-item lines="none">
                    <ion-avatar slot="start">
                        <ion-img [src]="cartProduct.getProduct().getImage()"></ion-img>
                    </ion-avatar>
                    <ion-grid>
                        <ion-row class="ion-align-items-center">
                            <ion-col class="ion-margin-end" size="auto">
                                <ion-label>
                                    <h2>{{cartProduct.getProduct().getTitle()}}</h2>
                                    <h3>{{cartProduct.getProduct().getPrice() | currency: 'EUR'}}</h3>
                                </ion-label>
                            </ion-col>

                            <ion-col size="auto">
                                <ion-item class="ion-no-padding">
                                    <ion-label>Amount:</ion-label>
                                    <ion-select interface="popover"
                                            (ionChange)="cartProduct.changeQuantity($event.target.value); updateProducts()"
                                            value="{{cartProduct.getQuantity()}}">
                                        <ion-select-option value="{{i + 1}}"
                                                           *ngFor="let _ of amount; index as i">{{i + 1}}</ion-select-option>
                                    </ion-select>
                                </ion-item>
                            </ion-col>

                            <ion-col class="ion-no-margin">
                                <ion-button (click)="removeFromCart(cartProduct)" class="ion-float-end">
                                    <ion-icon slot="icon-only" name="close"></ion-icon>
                                </ion-button>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-item>
            </ion-card>
        </form>
    </ng-container>

    <div *ngIf="products.length === 0" id="container">
        <h2>Cart is empty!</h2>
    </div>

</ion-content>
